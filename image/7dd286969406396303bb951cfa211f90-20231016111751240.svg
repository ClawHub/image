<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="485px" preserveAspectRatio="none" style="width:1163px;height:485px;background:#FFFFFF;" version="1.1" viewBox="0 0 1163 485" width="1163px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="304.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="63" y="91.2969"/><rect fill="#FFFFFF" height="283.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="330" y="112.4297"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="946.5" y="270.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1125.5" y="299.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="68" x2="68" y1="81.2969" y2="404.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="335" x2="335" y1="81.2969" y2="404.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="520" x2="520" y1="81.2969" y2="404.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="707" x2="707" y1="81.2969" y2="404.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="951" x2="951" y1="81.2969" y2="404.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1130" x2="1130" y1="81.2969" y2="404.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="5" y="77.9951">SpuSaveManager</text><ellipse cx="68" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M68,21.5 L68,48.5 M55,29.5 L81,29.5 M68,48.5 L55,63.5 M68,48.5 L81,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="5" y="416.6201">SpuSaveManager</text><ellipse cx="68" cy="428.4219" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M68,436.4219 L68,463.4219 M55,444.4219 L81,444.4219 M68,463.4219 L55,478.4219 M68,463.4219 L81,478.4219 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="245" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="252" y="69.9951">GoodsInfoWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="245" y="403.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="252" y="423.6201">GoodsInfoWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="435" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="442" y="69.9951">GoodsInfoWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="435" y="403.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="442" y="423.6201">GoodsInfoWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="615" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="622" y="69.9951">GoodsStockWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="615" y="403.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="622" y="423.6201">GoodsStockWriteService</text><rect fill="#FFA500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="285" x="809" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="816" y="69.9951">GoodsStockResidueCacheWriteService</text><rect fill="#FFA500" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="285" x="809" y="403.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="816" y="423.6201">GoodsStockResidueCacheWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1104" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1111" y="69.9951">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1104" y="403.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1111" y="423.6201">Redis</text><rect fill="#FFFFFF" height="304.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="63" y="91.2969"/><rect fill="#FFFFFF" height="283.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="330" y="112.4297"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="946.5" y="270.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1125.5" y="299.2266"/><polygon fill="#181818" points="318,108.4297,328,112.4297,318,116.4297,322,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73" x2="324" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="80" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="93" y="107.3638">saveSpuInfo 保存本地商品及库存信息</text><path d="M345,125.4297 L345,150.4297 L418,150.4297 L418,135.4297 L408,125.4297 L345,125.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M408,125.4297 L408,135.4297 L418,135.4297 L408,125.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="351" y="142.4966">开始事务</text><polygon fill="#181818" points="508,172.6953,518,176.6953,508,180.6953,512,176.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="514" y1="176.6953" y2="176.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347" y="171.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="360" y="171.6294">insertGoodsInfo</text><polygon fill="#181818" points="695,201.8281,705,205.8281,695,209.8281,699,205.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="701" y1="205.8281" y2="205.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347" y="200.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="360" y="200.7622">insertGoodsStock</text><path d="M345,218.8281 L345,243.8281 L723,243.8281 L723,228.8281 L713,218.8281 L345,218.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M713,218.8281 L713,228.8281 L723,228.8281 L713,218.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="351" y="235.895">计算剩余库存 = 商品库存，如果不限库存，则剩余库存值为-1</text><polygon fill="#181818" points="934.5,266.0938,944.5,270.0938,934.5,274.0938,938.5,270.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="940.5" y1="270.0938" y2="270.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347" y="265.0278">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="360" y="265.0278">initStockResidue 初始化库存剩余数</text><polygon fill="#181818" points="1113.5,295.2266,1123.5,299.2266,1113.5,303.2266,1117.5,299.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="956.5" x2="1119.5" y1="299.2266" y2="299.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="963.5" y="294.1606">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="976.5" y="294.1606">set 剩余库存</text><polygon fill="#181818" points="967.5,324.3594,957.5,328.3594,967.5,332.3594,963.5,328.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="1129.5" y1="328.3594" y2="328.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="973.5" y="323.2935">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="986.5" y="323.2935">结果</text><polygon fill="#181818" points="351,353.4922,341,357.4922,351,361.4922,347,357.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="345" x2="950.5" y1="357.4922" y2="357.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357" y="352.4263">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="370" y="352.4263"> </text><polygon fill="#181818" points="84,382.625,74,386.625,84,390.625,80,386.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="329" y1="386.625" y2="386.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="90" y="381.5591">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="103" y="381.5591"> </text></g></svg>