<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1200px" preserveAspectRatio="none" style="width:1922px;height:1200px;background:#FFFFFF;" version="1.1" viewBox="0 0 1922 1200" width="1922px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1019.4688" style="stroke:#181818;stroke-width:1.0;" width="10" x="26.5" y="91.2969"/><rect fill="#FFFFFF" height="998.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="182.5" y="112.4297"/><rect fill="#FFFFFF" height="931.0703" style="stroke:#181818;stroke-width:1.0;" width="10" x="445.5" y="141.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="339.1641"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="494.6328"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="620.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="747.3047"/><rect fill="#FFFFFF" height="180.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1124" y="805.5703"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1365" y="869.8359"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1564" y="928.1016"/><rect fill="none" height="787.5391" style="stroke:#000000;stroke-width:1.5;" width="1887" x="28" y="256.9609"/><rect fill="none" height="654.2031" style="stroke:#000000;stroke-width:1.5;" width="1867" x="38" y="383.2969"/><rect fill="none" height="491.7344" style="stroke:#000000;stroke-width:1.5;" width="1847" x="48" y="538.7656"/><rect fill="none" height="358.3984" style="stroke:#000000;stroke-width:1.5;" width="1827" x="58" y="665.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="31" x2="31" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="187" x2="187" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="450" x2="450" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="882" x2="882" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1129" x2="1129" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1370" x2="1370" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1569" x2="1569" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1702" x2="1702" y1="81.2969" y2="1119.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1807" x2="1807" y1="81.2969" y2="1119.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="77.9951">Dubbo</text><ellipse cx="31.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,21.5 L31.5,48.5 M18.5,29.5 L44.5,29.5 M31.5,48.5 L18.5,63.5 M31.5,48.5 L44.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="1131.7607">Dubbo</text><ellipse cx="31.5" cy="1143.5625" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,1151.5625 L31.5,1178.5625 M18.5,1159.5625 L44.5,1159.5625 M31.5,1178.5625 L18.5,1193.5625 M31.5,1178.5625 L44.5,1193.5625 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="68" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="75" y="69.9951">SpuOrderStockWriteBusinessApi</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="68" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="75" y="1138.7607">SpuOrderStockWriteBusinessApi</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="267" x="317" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="324" y="69.9951">SpuOrderStockConfirmWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="267" x="317" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="324" y="1138.7607">SpuOrderStockConfirmWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="785" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="792" y="69.9951">GoodsSellLogReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="785" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="792" y="1138.7607">GoodsSellLogReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="278" x="990" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="997" y="69.9951">SpuOrderStockConfirmBizWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="278" x="990" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="997" y="1138.7607">SpuOrderStockConfirmBizWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="1278" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="1285" y="69.9951">GoodsStockWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="1278" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="1285" y="1138.7607">GoodsStockWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="1472" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="1479" y="69.9951">GoodsSellLogWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="1472" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="1479" y="1138.7607">GoodsSellLogWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1676" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1683" y="69.9951">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="1676" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="1683" y="1138.7607">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1739" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1746" y="69.9951">SpuWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1739" y="1118.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1746" y="1138.7607">SpuWriteManager</text><rect fill="#FFFFFF" height="1019.4688" style="stroke:#181818;stroke-width:1.0;" width="10" x="26.5" y="91.2969"/><rect fill="#FFFFFF" height="998.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="182.5" y="112.4297"/><rect fill="#FFFFFF" height="931.0703" style="stroke:#181818;stroke-width:1.0;" width="10" x="445.5" y="141.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="339.1641"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="494.6328"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="620.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="877.5" y="747.3047"/><rect fill="#FFFFFF" height="180.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1124" y="805.5703"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1365" y="869.8359"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1564" y="928.1016"/><polygon fill="#181818" points="170.5,108.4297,180.5,112.4297,170.5,116.4297,174.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="36.5" x2="176.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="43.5" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="56.5" y="107.3638">confirmStock</text><polygon fill="#181818" points="433.5,137.5625,443.5,141.5625,433.5,145.5625,437.5,141.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="192.5" x2="439.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="199.5" y="136.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="212.5" y="136.4966">confirmStock</text><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="497.5" y1="170.6953" y2="170.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="497.5" x2="497.5" y1="170.6953" y2="183.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="456.5" x2="497.5" y1="183.6953" y2="183.6953"/><polygon fill="#181818" points="466.5,179.6953,456.5,183.6953,466.5,187.6953,462.5,183.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="462.5" y="165.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="475.5" y="165.6294">校验参数：订单id等</text><polygon fill="#181818" points="865.5,208.8281,875.5,212.8281,865.5,216.8281,869.5,212.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="871.5" y1="212.8281" y2="212.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="462.5" y="207.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="475.5" y="207.7622">queryListByOrderIdAndTypeList 查询当前订单的"释放"库存流水</text><polygon fill="#181818" points="466.5,237.9609,456.5,241.9609,466.5,245.9609,462.5,241.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="881.5" y1="241.9609" y2="241.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="472.5" y="236.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="485.5" y="236.895">"释放"库存流水</text><path d="M28,256.9609 L92,256.9609 L92,264.0938 L82,274.0938 L28,274.0938 L28,256.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="787.5391" style="stroke:#000000;stroke-width:1.5;" width="1887" x="28" y="256.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="43" y="270.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="253" x="107" y="269.1714">[如果存在"释放"库存流水，则表明，订单已经取消]</text><polygon fill="#181818" points="203.5,291.2266,193.5,295.2266,203.5,299.2266,199.5,295.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="444.5" y1="295.2266" y2="295.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="290.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="222.5" y="290.1606">确认成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="1915" y1="304.2266" y2="304.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="33" y="314.437">[如果不存在"释放"库存流水]</text><polygon fill="#181818" points="865.5,335.1641,875.5,339.1641,865.5,343.1641,869.5,339.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="871.5" y1="339.1641" y2="339.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="462.5" y="334.0981">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="475.5" y="334.0981">queryListByOrderIdAndTypeList 查询当前订单的"确认"库存流水</text><polygon fill="#181818" points="466.5,364.2969,456.5,368.2969,466.5,372.2969,462.5,368.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="881.5" y1="368.2969" y2="368.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="472.5" y="363.231">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="485.5" y="363.231">"确认"库存流水</text><path d="M38,383.2969 L102,383.2969 L102,390.4297 L92,400.4297 L38,400.4297 L38,383.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="654.2031" style="stroke:#000000;stroke-width:1.5;" width="1867" x="38" y="383.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="53" y="396.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="297" x="117" y="395.5073">[如果存在"确认"库存流水，则表明，已处理过确认库存逻辑]</text><polygon fill="#181818" points="203.5,417.5625,193.5,421.5625,203.5,425.5625,199.5,421.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="444.5" y1="421.5625" y2="421.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="416.4966">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="222.5" y="416.4966">确认成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38" x2="1905" y1="430.5625" y2="430.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="330" x="43" y="440.7729">[如果不存在"确认"库存流水，对订单id加上“释放-确认”Redis锁]</text><polygon fill="#181818" points="1690.5,461.5,1700.5,465.5,1690.5,469.5,1694.5,465.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="1696.5" y1="465.5" y2="465.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="460.4341">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393" x="484.5" y="460.4341">获取锁   key  goodsStockReleaseConfirmLockPrefix:${orderId}</text><polygon fill="#181818" points="865.5,490.6328,875.5,494.6328,865.5,498.6328,869.5,494.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="871.5" y1="494.6328" y2="494.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="489.5669">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="484.5" y="489.5669">queryListByOrderIdAndTypeList 查询当前订单的"释放"库存流水</text><polygon fill="#181818" points="466.5,519.7656,456.5,523.7656,466.5,527.7656,462.5,523.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="881.5" y1="523.7656" y2="523.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="472.5" y="518.6997">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="494.5" y="518.6997">"释放"库存流水</text><path d="M48,538.7656 L112,538.7656 L112,545.8984 L102,555.8984 L48,555.8984 L48,538.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="491.7344" style="stroke:#000000;stroke-width:1.5;" width="1847" x="48" y="538.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="63" y="551.8325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="253" x="127" y="550.9761">[如果存在"释放"库存流水，则表明，订单已经取消]</text><polygon fill="#181818" points="203.5,573.0313,193.5,577.0313,203.5,581.0313,199.5,577.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="444.5" y1="577.0313" y2="577.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="571.9653">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="571.9653">确认成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="1895" y1="586.0313" y2="586.0313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="53" y="596.2417">[如果不存在"释放"库存流水]</text><polygon fill="#181818" points="865.5,616.9688,875.5,620.9688,865.5,624.9688,869.5,620.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="871.5" y1="620.9688" y2="620.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="615.9028">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="484.5" y="615.9028">queryListByOrderIdAndTypeList 查询当前订单的"确认"库存流水</text><polygon fill="#181818" points="466.5,646.1016,456.5,650.1016,466.5,654.1016,462.5,650.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="881.5" y1="650.1016" y2="650.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="472.5" y="645.0356">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="494.5" y="645.0356">"确认"库存流水</text><path d="M58,665.1016 L122,665.1016 L122,672.2344 L112,682.2344 L58,682.2344 L58,665.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="358.3984" style="stroke:#000000;stroke-width:1.5;" width="1827" x="58" y="665.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="73" y="678.1685">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="297" x="137" y="677.312">[如果存在"确认"库存流水，则表明，已处理过确认库存逻辑]</text><polygon fill="#181818" points="203.5,699.3672,193.5,703.3672,203.5,707.3672,199.5,703.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="444.5" y1="703.3672" y2="703.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="698.3013">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="698.3013">确认成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="1885" y1="712.3672" y2="712.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="63" y="722.5776">[如果不存在"确认"库存流水]</text><polygon fill="#181818" points="865.5,743.3047,875.5,747.3047,865.5,751.3047,869.5,747.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="871.5" y1="747.3047" y2="747.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="742.2388">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="484.5" y="742.2388">queryListByOrderIdAndTypeList 查询当前订单的"占用"库存流水</text><polygon fill="#181818" points="466.5,772.4375,456.5,776.4375,466.5,780.4375,462.5,776.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="881.5" y1="776.4375" y2="776.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="472.5" y="771.3716">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="494.5" y="771.3716">"占用"库存流水</text><polygon fill="#181818" points="1112,801.5703,1122,805.5703,1112,809.5703,1116,805.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455.5" x2="1118" y1="805.5703" y2="805.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="800.5044">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="484.5" y="800.5044">确认库存</text><path d="M1139,818.5703 L1139,843.5703 L1212,843.5703 L1212,828.5703 L1202,818.5703 L1139,818.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1202,818.5703 L1202,828.5703 L1212,828.5703 L1202,818.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="1145" y="835.6372">开启事务</text><polygon fill="#181818" points="1353,865.8359,1363,869.8359,1353,873.8359,1357,869.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1134" x2="1359" y1="869.8359" y2="869.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1141" y="864.77">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="1163" y="864.77">批量更新goods_stock的销量</text><polygon fill="#181818" points="1145,894.9688,1135,898.9688,1145,902.9688,1141,898.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1139" x2="1369" y1="898.9688" y2="898.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1151" y="893.9028">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="1173" y="893.9028">更新结果</text><polygon fill="#181818" points="1552,924.1016,1562,928.1016,1552,932.1016,1556,928.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1134" x2="1558" y1="928.1016" y2="928.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1141" y="923.0356">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="1163" y="923.0356">batchInsertGoodsSellLog 批量插入确认库存流水</text><polygon fill="#181818" points="1145,953.2344,1135,957.2344,1145,961.2344,1141,957.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1139" x2="1568" y1="957.2344" y2="957.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1151" y="952.1685">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1173" y="952.1685">批量插入结果</text><polygon fill="#181818" points="466.5,982.3672,456.5,986.3672,466.5,990.3672,462.5,986.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="460.5" x2="1128" y1="986.3672" y2="986.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="472.5" y="981.3013">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="494.5" y="981.3013">结果</text><polygon fill="#181818" points="1795,1011.5,1805,1015.5,1795,1019.5,1799,1015.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="455.5" x2="1801" y1="1015.5" y2="1015.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="462.5" y="1010.4341">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="484.5" y="1010.4341">batchUpdateStatusByTmSpuIdList 售罄下架</text><polygon fill="#181818" points="203.5,1068.6328,193.5,1072.6328,203.5,1076.6328,199.5,1072.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="449.5" y1="1072.6328" y2="1072.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="1067.5669">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="1067.5669">确认库存结果</text><polygon fill="#181818" points="47.5,1097.7656,37.5,1101.7656,47.5,1105.7656,43.5,1101.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41.5" x2="181.5" y1="1101.7656" y2="1101.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="53.5" y="1096.6997">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="75.5" y="1096.6997"> </text></g></svg>