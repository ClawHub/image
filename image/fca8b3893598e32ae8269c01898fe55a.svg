<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1499px" preserveAspectRatio="none" style="width:2745px;height:1499px;background:#FFFFFF;" version="1.1" viewBox="0 0 2745 1499" width="2745px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1318.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="26.5" y="91.2969"/><rect fill="#FFFFFF" height="1297.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="182.5" y="112.4297"/><rect fill="#FFFFFF" height="1230.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="447" y="141.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="339.1641"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="494.6328"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="620.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="747.3047"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1140" y="829.7031"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1446" y="1099.8984"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1446" y="1271.6953"/><rect fill="#FFFFFF" height="270.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="1739" y="894.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2167" y="959.2344"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2366" y="1017.5"/><rect fill="none" height="1086.8672" style="stroke:#000000;stroke-width:1.5;" width="2710" x="28" y="256.9609"/><rect fill="none" height="953.5313" style="stroke:#000000;stroke-width:1.5;" width="2690" x="38" y="383.2969"/><rect fill="none" height="791.0625" style="stroke:#000000;stroke-width:1.5;" width="2670" x="48" y="538.7656"/><rect fill="none" height="657.7266" style="stroke:#000000;stroke-width:1.5;" width="2650" x="58" y="665.1016"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1001.5" x="307" y="791.4375"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="596" x="1298.5" y="1061.6328"/><rect fill="none" height="106.5313" style="stroke:#000000;stroke-width:1.5;" width="1316.5" x="297" y="1209.2969"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1296.5" x="307" y="1233.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="31" x2="31" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="187" x2="187" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="452" x2="452" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="883.5" x2="883.5" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1144.5" x2="1144.5" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1450.5" x2="1450.5" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1743.5" x2="1743.5" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2172" x2="2172" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2371" x2="2371" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2504" x2="2504" y1="81.2969" y2="1419.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2619" x2="2619" y1="81.2969" y2="1419.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="77.9951">Dubbo</text><ellipse cx="31.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,21.5 L31.5,48.5 M18.5,29.5 L44.5,29.5 M31.5,48.5 L18.5,63.5 M31.5,48.5 L44.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="1431.0889">Dubbo</text><ellipse cx="31.5" cy="1442.8906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,1450.8906 L31.5,1477.8906 M18.5,1458.8906 L44.5,1458.8906 M31.5,1477.8906 L18.5,1492.8906 M31.5,1477.8906 L44.5,1492.8906 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="68" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="75" y="69.9951">SpuOrderStockWriteBusinessApi</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="68" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="75" y="1438.0889">SpuOrderStockWriteBusinessApi</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="270" x="317" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="256" x="324" y="69.9951">SpuOrderStockReleaseWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="270" x="317" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="256" x="324" y="1438.0889">SpuOrderStockReleaseWriteManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="786.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="793.5" y="69.9951">GoodsSellLogReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="786.5" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="793.5" y="1438.0889">GoodsSellLogReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="307" x="991.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="998.5" y="69.9951">GoodsStockResidueCacheBizReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="307" x="991.5" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="998.5" y="1438.0889">GoodsStockResidueCacheBizReadService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="285" x="1308.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="1315.5" y="69.9951">GoodsStockResidueCacheWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="285" x="1308.5" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="1315.5" y="1438.0889">GoodsStockResidueCacheWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="281" x="1603.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="1610.5" y="69.9951">SpuOrderStockReleaseBizWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="281" x="1603.5" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="1610.5" y="1438.0889">SpuOrderStockReleaseBizWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="2080" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="2087" y="69.9951">GoodsStockWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="2080" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="2087" y="1438.0889">GoodsStockWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="2274" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="2281" y="69.9951">GoodsSellLogWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="2274" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="2281" y="1438.0889">GoodsSellLogWriteService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="2478" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="2485" y="69.9951">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="2478" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="2485" y="1438.0889">Redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="2541" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2548" y="69.9951">TmSpuExportService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="2541" y="1418.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2548" y="1438.0889">TmSpuExportService</text><rect fill="#FFFFFF" height="1318.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="26.5" y="91.2969"/><rect fill="#FFFFFF" height="1297.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="182.5" y="112.4297"/><rect fill="#FFFFFF" height="1230.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="447" y="141.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="212.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="339.1641"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="494.6328"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="620.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="879" y="747.3047"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1140" y="829.7031"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1446" y="1099.8984"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1446" y="1271.6953"/><rect fill="#FFFFFF" height="270.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="1739" y="894.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2167" y="959.2344"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2366" y="1017.5"/><polygon fill="#181818" points="170.5,108.4297,180.5,112.4297,170.5,116.4297,174.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="36.5" x2="176.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="43.5" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="56.5" y="107.3638">releaseStock</text><polygon fill="#181818" points="435,137.5625,445,141.5625,435,145.5625,439,141.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="192.5" x2="441" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="199.5" y="136.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="212.5" y="136.4966">releaseStock</text><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="499" y1="170.6953" y2="170.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="499" x2="499" y1="170.6953" y2="183.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="458" x2="499" y1="183.6953" y2="183.6953"/><polygon fill="#181818" points="468,179.6953,458,183.6953,468,187.6953,464,183.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="464" y="165.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="477" y="165.6294">校验参数：订单id等</text><polygon fill="#181818" points="867,208.8281,877,212.8281,867,216.8281,871,212.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="873" y1="212.8281" y2="212.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="464" y="207.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="477" y="207.7622">queryListByOrderIdAndTypeList 查询当前订单的"确认"库存流水</text><polygon fill="#181818" points="468,237.9609,458,241.9609,468,245.9609,464,241.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="883" y1="241.9609" y2="241.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="474" y="236.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="487" y="236.895">"确认"库存流水</text><path d="M28,256.9609 L92,256.9609 L92,264.0938 L82,274.0938 L28,274.0938 L28,256.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1086.8672" style="stroke:#000000;stroke-width:1.5;" width="2710" x="28" y="256.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="43" y="270.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="275" x="107" y="269.1714">[如果存在"确认"库存流水，则表明，订单已经支付成功]</text><polygon fill="#181818" points="203.5,291.2266,193.5,295.2266,203.5,299.2266,199.5,295.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="446" y1="295.2266" y2="295.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="290.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="222.5" y="290.1606">释放成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28" x2="2738" y1="304.2266" y2="304.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="33" y="314.437">[如果不存在"确认"库存流水]</text><polygon fill="#181818" points="867,335.1641,877,339.1641,867,343.1641,871,339.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="873" y1="339.1641" y2="339.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="464" y="334.0981">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="477" y="334.0981">queryListByOrderIdAndTypeList 查询当前订单的"释放"库存流水</text><polygon fill="#181818" points="468,364.2969,458,368.2969,468,372.2969,464,368.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="883" y1="368.2969" y2="368.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="474" y="363.231">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="487" y="363.231">"释放"库存流水</text><path d="M38,383.2969 L102,383.2969 L102,390.4297 L92,400.4297 L38,400.4297 L38,383.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="953.5313" style="stroke:#000000;stroke-width:1.5;" width="2690" x="38" y="383.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="53" y="396.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="297" x="117" y="395.5073">[如果存在"释放"库存流水，则表明，已处理过释放库存逻辑]</text><polygon fill="#181818" points="203.5,417.5625,193.5,421.5625,203.5,425.5625,199.5,421.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="446" y1="421.5625" y2="421.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="416.4966">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="222.5" y="416.4966">释放成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38" x2="2728" y1="430.5625" y2="430.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="330" x="43" y="440.7729">[如果不存在"释放"库存流水，对订单id加上“释放-确认”Redis锁]</text><polygon fill="#181818" points="2492.5,461.5,2502.5,465.5,2492.5,469.5,2496.5,465.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="2498.5" y1="465.5" y2="465.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="460.4341">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393" x="486" y="460.4341">获取锁   key  goodsStockReleaseConfirmLockPrefix:${orderId}</text><polygon fill="#181818" points="867,490.6328,877,494.6328,867,498.6328,871,494.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="873" y1="494.6328" y2="494.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="489.5669">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="486" y="489.5669">queryListByOrderIdAndTypeList 查询当前订单的"确认"库存流水</text><polygon fill="#181818" points="468,519.7656,458,523.7656,468,527.7656,464,523.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="883" y1="523.7656" y2="523.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="518.6997">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="496" y="518.6997">"确认"库存流水</text><path d="M48,538.7656 L112,538.7656 L112,545.8984 L102,555.8984 L48,555.8984 L48,538.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="791.0625" style="stroke:#000000;stroke-width:1.5;" width="2670" x="48" y="538.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="63" y="551.8325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="275" x="127" y="550.9761">[如果存在"确认"库存流水，则表明，订单已经支付成功]</text><polygon fill="#181818" points="203.5,573.0313,193.5,577.0313,203.5,581.0313,199.5,577.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="446" y1="577.0313" y2="577.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="571.9653">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="571.9653">释放成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="2718" y1="586.0313" y2="586.0313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="53" y="596.2417">[如果不存在"确认"库存流水]</text><polygon fill="#181818" points="867,616.9688,877,620.9688,867,624.9688,871,620.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="873" y1="620.9688" y2="620.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="615.9028">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="486" y="615.9028">queryListByOrderIdAndTypeList 查询当前订单的"释放"库存流水</text><polygon fill="#181818" points="468,646.1016,458,650.1016,468,654.1016,464,650.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="883" y1="650.1016" y2="650.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="645.0356">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="496" y="645.0356">"释放"库存流水</text><path d="M58,665.1016 L122,665.1016 L122,672.2344 L112,682.2344 L58,682.2344 L58,665.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="657.7266" style="stroke:#000000;stroke-width:1.5;" width="2650" x="58" y="665.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="73" y="678.1685">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="297" x="137" y="677.312">[如果存在"释放"库存流水，则表明，已处理过释放库存逻辑]</text><polygon fill="#181818" points="203.5,699.3672,193.5,703.3672,203.5,707.3672,199.5,703.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="446" y1="703.3672" y2="703.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="698.3013">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="698.3013">释放成功结果</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="2708" y1="712.3672" y2="712.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="63" y="722.5776">[如果不存在"释放"库存流水]</text><polygon fill="#181818" points="867,743.3047,877,747.3047,867,751.3047,871,747.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="873" y1="747.3047" y2="747.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="742.2388">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="486" y="742.2388">queryListByOrderIdAndTypeList 查询当前订单的"占用"库存流水</text><polygon fill="#181818" points="468,772.4375,458,776.4375,468,780.4375,464,776.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="883" y1="776.4375" y2="776.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="771.3716">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="496" y="771.3716">"占用"库存流水</text><path d="M307,791.4375 L384,791.4375 L384,798.5703 L374,808.5703 L307,808.5703 L307,791.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1001.5" x="307" y="791.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="322" y="804.5044">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="399" y="803.6479">[循环所有商品]</text><polygon fill="#181818" points="1128,825.7031,1138,829.7031,1128,833.7031,1132,829.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="1134" y1="829.7031" y2="829.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="824.6372">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="486" y="824.6372">queryGoodsStockResidueFromCache</text><polygon fill="#181818" points="468,854.8359,458,858.8359,468,862.8359,464,858.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="1144" y1="858.8359" y2="858.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="853.77">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="496" y="853.77">商品剩余库存</text><polygon fill="#181818" points="1727,890.9688,1737,894.9688,1727,898.9688,1731,894.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="1733" y1="894.9688" y2="894.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="889.9028">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="486" y="889.9028">释放库存</text><path d="M1754,907.9688 L1754,932.9688 L1827,932.9688 L1827,917.9688 L1817,907.9688 L1754,907.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1817,907.9688 L1817,917.9688 L1827,917.9688 L1817,907.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="1760" y="925.0356">开启事务</text><polygon fill="#181818" points="2155,955.2344,2165,959.2344,2155,963.2344,2159,959.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1749" x2="2161" y1="959.2344" y2="959.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1756" y="954.1685">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="377" x="1778" y="954.1685">batchReleaseGoodsStock 批量更新goods_stock的剩余库存数</text><polygon fill="#181818" points="1760,984.3672,1750,988.3672,1760,992.3672,1756,988.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1754" x2="2171" y1="988.3672" y2="988.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1766" y="983.3013">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="1788" y="983.3013">更新结果</text><polygon fill="#181818" points="2354,1013.5,2364,1017.5,2354,1021.5,2358,1017.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1749" x2="2360" y1="1017.5" y2="1017.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1756" y="1012.4341">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="1778" y="1012.4341">batchInsertGoodsSellLog 批量插入释放库存流水</text><polygon fill="#181818" points="1760,1042.6328,1750,1046.6328,1760,1050.6328,1756,1046.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1754" x2="2370" y1="1046.6328" y2="1046.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1766" y="1041.5669">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1788" y="1041.5669">批量插入结果</text><path d="M1298.5,1061.6328 L1375.5,1061.6328 L1375.5,1068.7656 L1365.5,1078.7656 L1298.5,1078.7656 L1298.5,1061.6328 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="596" x="1298.5" y="1061.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="1313.5" y="1074.6997">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="1390.5" y="1073.8433">[循环订单中所有的商品]</text><polygon fill="#181818" points="1467,1095.8984,1457,1099.8984,1467,1103.8984,1463,1099.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1461" x2="1738" y1="1099.8984" y2="1099.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1473" y="1094.8325">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1495" y="1094.8325">恢复扣减的剩余库存</text><polygon fill="#181818" points="1727,1125.0313,1737,1129.0313,1727,1133.0313,1731,1129.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1451" x2="1733" y1="1129.0313" y2="1129.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1458" y="1123.9653">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="1480" y="1123.9653">结果</text><polygon fill="#181818" points="468,1161.1641,458,1165.1641,468,1169.1641,464,1165.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="1743" y1="1165.1641" y2="1165.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="1160.0981">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="496" y="1160.0981">结果</text><polygon fill="#181818" points="2607.5,1190.2969,2617.5,1194.2969,2607.5,1198.2969,2611.5,1194.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457" x2="2613.5" y1="1194.2969" y2="1194.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="1189.231">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="486" y="1189.231">异步回写材料销售标志</text><path d="M297,1209.2969 L361,1209.2969 L361,1216.4297 L351,1226.4297 L297,1226.4297 L297,1209.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="106.5313" style="stroke:#000000;stroke-width:1.5;" width="1316.5" x="297" y="1209.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="312" y="1222.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="376" y="1221.5073">[如果发生异常]</text><path d="M307,1233.4297 L384,1233.4297 L384,1240.5625 L374,1250.5625 L307,1250.5625 L307,1233.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1296.5" x="307" y="1233.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="322" y="1246.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="399" y="1245.6401">[循环订单中所有的商品]</text><polygon fill="#181818" points="1434,1267.6953,1444,1271.6953,1434,1275.6953,1438,1271.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="1440" y1="1271.6953" y2="1271.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="464" y="1266.6294">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="486" y="1266.6294">恢复扣减的剩余库存</text><polygon fill="#181818" points="468,1296.8281,458,1300.8281,468,1304.8281,464,1300.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="1450" y1="1300.8281" y2="1300.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="474" y="1295.7622">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="496" y="1295.7622">结果</text><polygon fill="#181818" points="203.5,1367.9609,193.5,1371.9609,203.5,1375.9609,199.5,1371.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="451" y1="1371.9609" y2="1371.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="209.5" y="1366.895">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="231.5" y="1366.895">释放库存结果</text><polygon fill="#181818" points="47.5,1397.0938,37.5,1401.0938,47.5,1405.0938,43.5,1401.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41.5" x2="181.5" y1="1401.0938" y2="1401.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="53.5" y="1396.0278">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="75.5" y="1396.0278"> </text></g></svg>